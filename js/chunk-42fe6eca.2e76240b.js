(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42fe6eca"],{5651:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container py-5"},[r("h1",[t._v("訂單管理")]),r("table",{staticClass:"table"},[t._m(0),r("tbody",t._l(t.orders,(function(e){return r("tr",{key:e.id},[r("td",[t._v(t._s(e.id))]),r("td",[t._v(t._s(e.createdAt))]),r("td",[t._v(t._s(e.User.name))]),r("td",[t._v(t._s(e.User.email))]),r("td",[t._v(t._s(e.receiver))]),r("td",[t._v(t._s(e.address))]),r("td",[t._v(t._s(e.amount))]),r("td",[t._v(t._s(e.OrderStatus.name))]),r("td",[11===e.OrderStatusId?r("button",{staticClass:"btn btn-info",on:{click:function(r){return t.updateOrderShipped(e.id)}}},[t._v("轉為已出貨")]):t._e()])])})),0)])])},n=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",{attrs:{scope:"col"}},[t._v("訂單編號")]),r("th",{attrs:{scope:"col"}},[t._v("訂單日期")]),r("th",{attrs:{scope:"col"}},[t._v("會員姓名")]),r("th",{attrs:{scope:"col"}},[t._v("會員電子郵件")]),r("th",{attrs:{scope:"col"}},[t._v("收件人")]),r("th",{attrs:{scope:"col"}},[t._v("收件地址")]),r("th",{attrs:{scope:"col"}},[t._v("訂單金額")]),r("th",{attrs:{scope:"col"}},[t._v("訂單狀態")]),r("th",{attrs:{scope:"col"}})])])}],o=(r("d81d"),r("5530")),c=(r("96cf"),r("1da1")),d=r("be6c"),s=r("2fa3"),i={data:function(){return{orders:[]}},created:function(){this.getAllOrders()},methods:{getAllOrders:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d["a"].getAllOrders();case 3:if(r=e.sent,a=r.data,n=r.statusText,"OK"===n){e.next=7;break}throw new Error(n);case 7:t.orders=a.orders,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),s["a"].fire({icon:"error",title:"無法獲取訂單資料"});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},updateOrderShipped:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var a,n,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,d["a"].updateOrderShipped(t);case 3:if(a=r.sent,n=a.data,c=a.statusText,"success"===n.status&&"OK"===c){r.next=7;break}throw new Error(c);case 7:e.orders=e.orders.map((function(e){return e.id===t?Object(o["a"])({},e,{OrderStatusId:31,OrderStatus:{id:31,name:"已出貨"}}):e})),r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](0),s["a"].fire({icon:"error",title:"無法變更訂單狀態為已出貨"});case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()}}},u=i,h=r("2877"),p=Object(h["a"])(u,a,n,!1,null,null,null);e["default"]=p.exports},be6c:function(t,e,r){"use strict";r("d3b7"),r("25f0"),r("3ca3"),r("ddb0"),r("2b3d");var a=r("2fa3"),n=function(){return localStorage.getItem("token")};e["a"]={getAllProducts:function(){return a["b"].get("/admin/products",{headers:{Authorization:"Bearer ".concat(n())}})},getAllBrandsAndCategories:function(){return a["b"].get("/admin/getAllBrandsAndCategories",{headers:{Authorization:"Bearer ".concat(n())}})},addNewProduct:function(t){return a["b"].post("/admin/products",t,{headers:{Authorization:"Bearer ".concat(n())}})},getProduct:function(t){var e=t.productId;return a["b"].get("/admin/products/".concat(e),{headers:{Authorization:"Bearer ".concat(n())}})},updateProduct:function(t){var e=t.formData,r=t.productId;return a["b"].post("/admin/products/".concat(r),e,{headers:{Authorization:"Bearer ".concat(n())}})},getCategories:function(t){var e=new URLSearchParams(t);return a["b"].get("/admin/categories?".concat(e.toString()),{headers:{Authorization:"Bearer ".concat(n())}})},addCategory:function(t){var e=t.formData,r=t.query,o=new URLSearchParams(r);return a["b"].post("/admin/categories?".concat(o.toString()),e,{headers:{Authorization:"Bearer ".concat(n())}})},updateCategory:function(t){var e=t.formData,r=t.query,o=new URLSearchParams(r);return a["b"].put("/admin/categories?".concat(o.toString()),e,{headers:{Authorization:"Bearer ".concat(n())}})},deleteCategory:function(t){var e=t.whichCategory,r=t.categoryId;return a["b"].delete("/admin/categories",{params:{whichCategory:e,categoryId:r},headers:{Authorization:"Bearer ".concat(n())}})},getAllMembers:function(){return a["b"].get("/admin/members",{headers:{Authorization:"Bearer ".concat(n())}})},getAllOrders:function(){return a["b"].get("/admin/orders",{headers:{Authorization:"Bearer ".concat(n())}})},updateOrderShipped:function(t){return a["b"].put("/admin/orders/".concat(t),{},{headers:{Authorization:"Bearer ".concat(n())}})},getAllBrands:function(){return a["b"].get("/admin/brands",{headers:{Authorization:"Bearer ".concat(n())}})},addBrand:function(t){var e=t.brandName;return a["b"].post("/admin/brands",{brandName:e},{headers:{Authorization:"Bearer ".concat(n())}})},updateBrand:function(t){var e=t.brandName,r=t.brandId;return a["b"].put("/admin/brands",{brandName:e,brandId:r},{headers:{Authorization:"Bearer ".concat(n())}})},deleteBrand:function(t){var e=t.brandId;return a["b"].delete("/admin/brands",{params:{brandId:e},headers:{Authorization:"Bearer ".concat(n())}})}}},d81d:function(t,e,r){"use strict";var a=r("23e7"),n=r("b727").map,o=r("1dde"),c=r("ae40"),d=o("map"),s=c("map");a({target:"Array",proto:!0,forced:!d||!s},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-42fe6eca.2e76240b.js.map