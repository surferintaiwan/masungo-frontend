(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-47f47aed"],{"0275":function(t,e,r){"use strict";var a=r("2fa3"),n=function(){return localStorage.getItem("token")};e["a"]={createOrder:function(t){var e=t.formData;return a["b"].post("/checkout",e,{headers:{Authorization:"Bearer ".concat(n())}})},getPayment:function(t){var e=t.orderId;return a["b"].get("/checkout/payment/".concat(e),{headers:{Authorization:"Bearer ".concat(n())}})},getOrderFinish:function(t){var e=t.orderId;return a["b"].get("/checkout/finish/".concat(e),{headers:{Authorization:"Bearer ".concat(n())}})}}},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,r){var a=r("1d80"),n=r("5899"),c="["+n+"]",o=RegExp("^"+c+c+"*"),s=RegExp(c+c+"*$"),i=function(t){return function(e){var r=String(a(e));return 1&t&&(r=r.replace(o,"")),2&t&&(r=r.replace(s,"")),r}};t.exports={start:i(1),end:i(2),trim:i(3)}},"644d":function(t,e,r){"use strict";var a=r("2fa3");e["a"]={getCartItems:function(t){var e=t.cartId;return a["b"].get("/cart/".concat(e))},addCartItem:function(t){var e=t.cartId,r=t.productId,n=t.amount;return a["b"].post("/cart",{cartId:e,productId:r,amount:n})},deleteCartItem:function(t){var e=t.cartId,r=t.productId;return a["b"].delete("/cart",{params:{cartId:e,productId:r}})}}},7156:function(t,e,r){var a=r("861d"),n=r("d2bb");t.exports=function(t,e,r){var c,o;return n&&"function"==typeof(c=e.constructor)&&c!==r&&a(o=c.prototype)&&o!==r.prototype&&n(t,o),t}},8421:function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("table",{staticClass:"table"},[r("thead",[r("tr",[r("th",{attrs:{scope:"col"}}),r("th",{attrs:{scope:"col"}},[t._v("產品名稱")]),r("th",{attrs:{scope:"col"}},[t._v("售價")]),r("th",{attrs:{scope:"col"}},[t._v("數量")]),r("th",{attrs:{scope:"col"}},[t._v("小計")]),t.canDelete?r("th",{attrs:{scope:"col"}},[t._v("刪除")]):t._e()])]),r("tbody",[t._l(t.cart.CartItems,(function(e){return r("tr",{key:e},[r("td",[r("img",{staticStyle:{width:"200px"},attrs:{src:e.Product.image1,alt:""}})]),r("td",[t._v(t._s(e.Product.name))]),r("td",[t._v(t._s(e.Product.sellingPrice))]),r("td",[t._v(t._s(e.quantity))]),r("td",[t._v(t._s(e.Product.sellingPrice*e.quantity))]),t.canDelete?r("td",[r("button",{staticClass:"btn btn-info",on:{click:function(r){return t.deleteCartItem(e.Product.id)}}},[t._v("刪除")])]):t._e()])})),r("tr",[r("td"),r("td"),r("td"),r("td",[t._v("總計")]),r("td",[t._v(t._s(t.totalPrice))])])],2)])},n=[],c=(r("a9e3"),r("96cf"),r("1da1")),o={props:{cart:{type:Object,required:!0},totalPrice:{type:Number,required:!0},canDelete:{type:Boolean,default:!0}},methods:{deleteCartItem:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.$emit("after-delete-cart-item",t);case 1:case"end":return r.stop()}}),r)})))()}}},s=o,i=r("2877"),u=Object(i["a"])(s,a,n,!1,null,null,null);e["a"]=u.exports},a9e3:function(t,e,r){"use strict";var a=r("83ab"),n=r("da84"),c=r("94ca"),o=r("6eeb"),s=r("5135"),i=r("c6b6"),u=r("7156"),l=r("c04e"),d=r("d039"),f=r("7c73"),p=r("241c").f,m=r("06cf").f,v=r("9bf2").f,h=r("58a8").trim,_="Number",b=n[_],I=b.prototype,g=i(f(I))==_,C=function(t){var e,r,a,n,c,o,s,i,u=l(t,!1);if("string"==typeof u&&u.length>2)if(u=h(u),e=u.charCodeAt(0),43===e||45===e){if(r=u.charCodeAt(2),88===r||120===r)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:a=2,n=49;break;case 79:case 111:a=8,n=55;break;default:return+u}for(c=u.slice(2),o=c.length,s=0;s<o;s++)if(i=c.charCodeAt(s),i<48||i>n)return NaN;return parseInt(c,a)}return+u};if(c(_,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var k,y=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof y&&(g?d((function(){I.valueOf.call(r)})):i(r)!=_)?u(new b(C(e)),r,y):C(e)},x=a?p(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;x.length>w;w++)s(b,k=x[w])&&!s(y,k)&&v(y,k,m(b,k));y.prototype=I,I.constructor=y,o(n,_,y)}},da3a:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container py-5"},[r("h1",[t._v("結帳頁")]),r("CartTable",{attrs:{cart:t.cart,totalPrice:t.totalPrice,canDelete:t.canDelete}}),r("form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[t._m(0),t._m(1),t._m(2),t._m(3),r("input",{attrs:{name:"amount",type:"text",hidden:""},domProps:{value:t.totalPrice}}),r("input",{attrs:{name:"cartId",type:"text",hidden:""},domProps:{value:t.cart.id}}),r("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("確認訂單")])])],1)},n=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"address"}},[t._v("收件地址:")]),r("input",{staticClass:"form-control",attrs:{type:"text",id:"address",name:"address",required:""}})])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"receiver"}},[t._v("收件人:")]),r("input",{staticClass:"form-control",attrs:{type:"text",id:"receiver",name:"receiver",required:""}})])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-group"},[t._v(" 運送方式: "),r("div",{staticClass:"form-check form-check-inline"},[r("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"deliveryMethodId",id:"storePickUp",value:"1",required:""}}),r("label",{staticClass:"form-check-label",attrs:{for:"storePickUp"}},[t._v("超商取貨")])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-group"},[t._v(" 付款方式: "),r("div",{staticClass:"form-check form-check-inline"},[r("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"paymentMethodId",id:"creditCart",value:"1",required:""}}),r("label",{staticClass:"form-check-label",attrs:{for:"creditCart"}},[t._v("信用卡")])])])}],c=(r("96cf"),r("1da1")),o=r("8421"),s=r("644d"),i=r("0275"),u=r("2fa3"),l={data:function(){return{cart:{},totalPrice:0,canDelete:!1}},created:function(){this.getCartItems()},components:{CartTable:o["a"]},methods:{getCartItems:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var r,a,n,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r=localStorage.getItem("cartId"),e.next=4,s["a"].getCartItems({cartId:r});case 4:if(a=e.sent,n=a.data,c=a.statusText,"OK"===c){e.next=8;break}throw new Error(c);case 8:t.cart=n.cart,t.totalPrice=n.totalPrice,e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](0),console.log("error",e.t0),u["a"].fire({icon:"error",title:"無法取得購物車資料"});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))()},handleSubmit:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var a,n,c,o,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,a=t.target,n=new FormData(a),r.next=5,i["a"].createOrder({formData:n});case 5:if(c=r.sent,o=c.data,s=c.statusText,o.status,"OK"===s){r.next=9;break}throw new Error(s);case 9:e.$router.push("/checkout/payment/".concat(o.orderId)),r.next=16;break;case 12:r.prev=12,r.t0=r["catch"](0),console.log("error",r.t0),u["a"].fire({icon:"error",title:"建立訂單失敗"});case 16:case"end":return r.stop()}}),r,null,[[0,12]])})))()}}},d=l,f=r("2877"),p=Object(f["a"])(d,a,n,!1,null,null,null);e["default"]=p.exports}}]);
//# sourceMappingURL=chunk-47f47aed.cae9e96e.js.map