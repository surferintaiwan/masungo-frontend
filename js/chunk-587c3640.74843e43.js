(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-587c3640"],{"401b":function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.isLoading?t._e():r("form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"name"}},[t._v("產品名稱(必填)")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.product.name,expression:"product.name"}],staticClass:"form-control",attrs:{type:"text",id:"name",name:"name",required:""},domProps:{value:t.product.name},on:{input:function(e){e.target.composing||t.$set(t.product,"name",e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"brandId"}},[t._v("品牌類別")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.product.BrandId,expression:"product.BrandId"}],staticClass:"form-control",attrs:{id:"brandId",name:"brandId"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.product,"BrandId",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"",selected:"",disabled:""}},[t._v("--請選擇--")]),t._l(t.brands,(function(e){return r("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2)]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"listPrice"}},[t._v("市價")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.product.listPrice,expression:"product.listPrice"}],staticClass:"form-control",attrs:{type:"text",id:"listPrice",name:"listPrice"},domProps:{value:t.product.listPrice},on:{input:function(e){e.target.composing||t.$set(t.product,"listPrice",e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"sellingPrice"}},[t._v("售價")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.product.sellingPrice,expression:"product.sellingPrice"}],staticClass:"form-control",attrs:{type:"text",id:"sellingPrice",name:"sellingPrice"},domProps:{value:t.product.sellingPrice},on:{input:function(e){e.target.composing||t.$set(t.product,"sellingPrice",e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"inventory"}},[t._v("庫存")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.product.inventory,expression:"product.inventory"}],staticClass:"form-control",attrs:{type:"text",id:"inventory",name:"inventory"},domProps:{value:t.product.inventory},on:{input:function(e){e.target.composing||t.$set(t.product,"inventory",e.target.value)}}})]),r("div",{staticClass:"form-group"},[t._v(" 是否上架(必填) "),r("div",{staticClass:"form-check"},[r("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"sellingStatus",id:"sellingStatusTrue",value:"1",required:""},domProps:{checked:!0===t.product.sellingStatus}}),r("label",{staticClass:"form-check-label",attrs:{for:"sellingStatusTrue"}},[t._v("是")])]),r("div",{staticClass:"form-check"},[r("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"sellingStatus",id:"sellingStatusFalse",value:"0"},domProps:{checked:!1===t.product.sellingStatus}}),r("label",{staticClass:"form-check-label",attrs:{for:"sellingStatusFalse"}},[t._v("否")])])]),r("div",{staticClass:"form-group"},[t._v(" 是否免運(必填) "),r("div",{staticClass:"form-check"},[r("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"shippingFee",id:"shippingFeeTrue",value:"1",required:""},domProps:{checked:!0===t.product.shippingFee}}),r("label",{staticClass:"form-check-label",attrs:{for:"shippingFeeTrue"}},[t._v("是")])]),r("div",{staticClass:"form-check"},[r("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"shippingFee",id:"shippingFeeFalse",value:"0"},domProps:{checked:!1===t.product.shippingFee}}),r("label",{staticClass:"form-check-label",attrs:{for:"shippingFeeFalse"}},[t._v("否")])])]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"image1"}},[t._v("Image1")]),t.product.image1?r("img",{staticClass:"d-block img-thumbnail mb-3",attrs:{src:t.product.image1,width:"200",height:"200"}}):t._e(),r("input",{staticClass:"form-control-file",attrs:{id:"image1",type:"file",name:"image1",accept:"image/*"},on:{change:t.handleFileChange}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"image2"}},[t._v("Image2")]),t.product.image2?r("img",{staticClass:"d-block img-thumbnail mb-3",attrs:{src:t.product.image2,width:"200",height:"200"}}):t._e(),r("input",{staticClass:"form-control-file",attrs:{id:"image2",type:"file",name:"image2",accept:"image/*"},on:{change:t.handleFileChange}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"image3"}},[t._v("Image3")]),t.product.image3?r("img",{staticClass:"d-block img-thumbnail mb-3",attrs:{src:t.product.image3,width:"200",height:"200"}}):t._e(),r("input",{staticClass:"form-control-file",attrs:{id:"image3",type:"file",name:"image3",accept:"image/*"},on:{change:t.handleFileChange}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"image4"}},[t._v("Image4")]),t.product.image4?r("img",{staticClass:"d-block img-thumbnail mb-3",attrs:{src:t.product.image4,width:"200",height:"200"}}):t._e(),r("input",{staticClass:"form-control-file",attrs:{id:"image4",type:"file",name:"image4",accept:"image/*"},on:{change:t.handleFileChange}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"detail"}},[t._v("商品描述")]),t.product.detail?r("img",{staticClass:"d-block img-thumbnail mb-3",attrs:{src:t.product.detail,width:"200",height:"200"}}):t._e(),r("input",{staticClass:"form-control-file",attrs:{id:"detail",type:"file",name:"detail",accept:"image/*"},on:{change:t.handleFileChange}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"deliveryKnow"}},[t._v("運送須知")]),t.product.deliveryKnow?r("img",{staticClass:"d-block img-thumbnail mb-3",attrs:{src:t.product.deliveryKnow,width:"200",height:"200"}}):t._e(),r("input",{staticClass:"form-control-file",attrs:{id:"deliveryKnow",type:"file",name:"deliveryKnow",accept:"image/*"},on:{change:t.handleFileChange}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"refundKnow"}},[t._v("退貨須知")]),t.product.refundKnow?r("img",{staticClass:"d-block img-thumbnail mb-3",attrs:{src:t.product.refundKnow,width:"200",height:"200"}}):t._e(),r("input",{staticClass:"form-control-file",attrs:{id:"refundKnow",type:"file",name:"refundKnow",accept:"image/*"},on:{change:t.handleFileChange}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"category1Id"}},[t._v("產品大類")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.product.Category1Id,expression:"product.Category1Id"}],staticClass:"form-control",attrs:{id:"category1Id",name:"category1Id"},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.product,"Category1Id",e.target.multiple?r:r[0])},function(e){return t.getCategories(e)}]}},[r("option",{attrs:{value:"",disabled:""}},[t._v("--請選擇--")]),t._l(t.category1s,(function(e){return r("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2)]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"category2Id"}},[t._v("產品中類")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.product.Category2Id,expression:"product.Category2Id"}],staticClass:"form-control",attrs:{id:"category2Id",name:"category2Id"},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.product,"Category2Id",e.target.multiple?r:r[0])},function(e){return t.getCategories(e)}]}},[r("option",{attrs:{value:"",selected:"",disabled:""}},[t._v("--請選擇--")]),t._l(t.category2s,(function(e){return r("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2)]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"category3Id"}},[t._v("產品小類")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.product.Category3Id,expression:"product.Category3Id"}],staticClass:"form-control",attrs:{id:"category3Id",name:"category3Id"},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.product,"Category3Id",e.target.multiple?r:r[0])},function(e){return t.getCategories(e)}]}},[r("option",{attrs:{value:"",selected:"",disabled:""}},[t._v("--請選擇--")]),t._l(t.category3s,(function(e){return r("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2)]),r("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:t.isProcessing}},[t._v(t._s(t.isProcessing?"處理中...":"送出"))])])},o=[],n=(r("b0c0"),r("d3b7"),r("3ca3"),r("ddb0"),r("2b3d"),r("96cf"),r("1da1")),i=r("5530"),s=r("2fa3"),c=r("be6c"),d={props:{productFromDb:{type:Object},isProcessing:{type:Boolean}},watch:{productFromDb:function(t){this.product=Object(i["a"])({},t),this.getCategories("getCategory2s"),this.getCategories("getCategory3s")}},data:function(){return{product:{name:null,BrandId:"",listPrice:0,sellingPrice:0,inventory:0,sellingStatus:null,shippingFee:null,image1:"",image2:"",image3:"",image4:"",detail:"",deliveryKnow:"",refundKnow:"",Category1Id:"",Category2Id:"",Category3Id:""},brands:[],category1s:[],category2s:[],category3s:[],isLoading:!0}},created:function(){this.getAllBrandsAndCategories(),this.getCategories("getCategory1s")},methods:{handleFileChange:function(t){var e=t.target.name,r=t.target.files,a=window.URL.createObjectURL(r[0]);"image1"===e?this.product.image1=a:"image2"===e?this.product.image2=a:"image3"===e?this.product.image3=a:"image4"===e?this.product.image4=a:"detail"===e?this.product.detail=a:"deliveryKnow"===e?this.product.deliveryKnow=a:this.product.refundKnow=a},getAllBrandsAndCategories:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c["a"].getAllBrandsAndCategories();case 3:if(r=e.sent,a=r.data,o=r.statusText,"OK"===o){e.next=7;break}throw new Error(o);case 7:t.brands=a.brands,t.isLoading=!1,e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](0),console.log(e.t0),s["a"].fire({icon:"error",title:"無法獲取品牌及分類資料"});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))()},handleSubmit:function(t){var e=t.target,r=new FormData(e);this.$emit("after-submit",r)},getCategories:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a,o,n,i,d,u,l,g,m,p,f,v,h;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,a={},"getCategory1s"!==t){r.next=13;break}return a[t]="",r.next=6,c["a"].getCategories(a);case 6:if(o=r.sent,n=o.data,i=o.statusText,"OK"===i){r.next=10;break}throw new Error(i);case 10:e.category1s=n.category1s,r.next=43;break;case 13:if("getCategory2s"!==t){r.next=24;break}return a["category1Id"]=e.product.Category1Id,r.next=17,c["a"].getCategories(a);case 17:if(d=r.sent,u=d.data,l=d.statusText,"OK"===l){r.next=21;break}throw new Error(l);case 21:e.category2s=u.category2s,r.next=43;break;case 24:if("getCategory3s"!==t){r.next=35;break}return a["category2Id"]=e.product.Category2Id,r.next=28,c["a"].getCategories(a);case 28:if(g=r.sent,m=g.data,p=g.statusText,"OK"===p){r.next=32;break}throw new Error(p);case 32:e.category3s=m.category3s,r.next=43;break;case 35:return a[t.target.name]=t.target.value,r.next=38,c["a"].getCategories(a);case 38:if(f=r.sent,v=f.data,h=f.statusText,"OK"===h){r.next=42;break}throw new Error(h);case 42:"category1Id"===t.target.name?(e.product.Category2Id="",e.product.Category3Id="",e.category2s=v.category2s):"category2Id"===t.target.name&&(e.product.Category3Id="",e.category3s=v.category3s);case 43:r.next=49;break;case 45:r.prev=45,r.t0=r["catch"](0),console.log(r.t0),s["a"].fire({icon:"error",title:"無法獲取分類資料"});case 49:case"end":return r.stop()}}),r,null,[[0,45]])})))()}}},u=d,l=r("2877"),g=Object(l["a"])(u,a,o,!1,null,null,null);e["a"]=g.exports},be6c:function(t,e,r){"use strict";r("d3b7"),r("25f0"),r("3ca3"),r("ddb0"),r("2b3d");var a=r("2fa3"),o=function(){return localStorage.getItem("token")};e["a"]={getAllProducts:function(){return a["b"].get("/admin/products",{headers:{Authorization:"Bearer ".concat(o())}})},getAllBrandsAndCategories:function(){return a["b"].get("/admin/getAllBrandsAndCategories",{headers:{Authorization:"Bearer ".concat(o())}})},addNewProduct:function(t){return a["b"].post("/admin/products",t,{headers:{Authorization:"Bearer ".concat(o())}})},getProduct:function(t){var e=t.productId;return a["b"].get("/admin/products/".concat(e),{headers:{Authorization:"Bearer ".concat(o())}})},updateProduct:function(t){var e=t.formData,r=t.productId;return a["b"].post("/admin/products/".concat(r),e,{headers:{Authorization:"Bearer ".concat(o())}})},getCategories:function(t){var e=new URLSearchParams(t);return a["b"].get("/admin/categories?".concat(e.toString()),{headers:{Authorization:"Bearer ".concat(o())}})},addCategory:function(t){var e=t.formData,r=t.query,n=new URLSearchParams(r);return a["b"].post("/admin/categories?".concat(n.toString()),e,{headers:{Authorization:"Bearer ".concat(o())}})},updateCategory:function(t){var e=t.formData,r=t.query,n=new URLSearchParams(r);return a["b"].put("/admin/categories?".concat(n.toString()),e,{headers:{Authorization:"Bearer ".concat(o())}})},deleteCategory:function(t){var e=t.whichCategory,r=t.categoryId;return a["b"].delete("/admin/categories",{params:{whichCategory:e,categoryId:r},headers:{Authorization:"Bearer ".concat(o())}})},getAllMembers:function(){return a["b"].get("/admin/members",{headers:{Authorization:"Bearer ".concat(o())}})},getAllOrders:function(){return a["b"].get("/admin/orders",{headers:{Authorization:"Bearer ".concat(o())}})},updateOrderShipped:function(t){return a["b"].put("/admin/orders/".concat(t),{},{headers:{Authorization:"Bearer ".concat(o())}})},getAllBrands:function(){return a["b"].get("/admin/brands",{headers:{Authorization:"Bearer ".concat(o())}})},addBrand:function(t){var e=t.brandName;return a["b"].post("/admin/brands",{brandName:e},{headers:{Authorization:"Bearer ".concat(o())}})},updateBrand:function(t){var e=t.brandName,r=t.brandId;return a["b"].put("/admin/brands",{brandName:e,brandId:r},{headers:{Authorization:"Bearer ".concat(o())}})},deleteBrand:function(t){var e=t.brandId;return a["b"].delete("/admin/brands",{params:{brandId:e},headers:{Authorization:"Bearer ".concat(o())}})}}},e866:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container py-5"},[r("h1",[t._v("編輯商品")]),r("AdminProductForm",{attrs:{"product-from-db":t.product,"is-processing":t.isProcessing},on:{"after-submit":t.handleAfterSubmit}})],1)},o=[],n=(r("96cf"),r("1da1")),i=r("401b"),s=r("be6c"),c=r("2fa3"),d={components:{AdminProductForm:i["a"]},data:function(){return{product:{},isProcessing:!1}},created:function(){this.getProduct()},methods:{getProduct:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var r,a,o,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r=t.$route.params.productId,e.next=4,s["a"].getProduct({productId:r});case 4:if(a=e.sent,o=a.data,n=a.statusText,"OK"===n){e.next=8;break}throw new Error(n);case 8:t.product=o.product,e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](0),console.log(e.t0),c["a"].fire({icon:"error",title:"無法獲取商品資料"});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))()},handleAfterSubmit:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a,o,n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,e.isProcessing=!0,a=e.$route.params.productId,r.next=5,s["a"].updateProduct({formData:t,productId:a});case 5:if(o=r.sent,n=o.data,i=o.statusText,"OK"===i&&"success"===n.status){r.next=9;break}throw new Error(i);case 9:c["a"].fire({icon:"success",title:"新增更新成功"}),e.isProcessing=!1,e.$router.push("/admin/products"),r.next=19;break;case 14:r.prev=14,r.t0=r["catch"](0),console.log(r.t0),c["a"].fire({icon:"error",title:"無法更新商品"}),e.isProcessing=!1;case 19:case"end":return r.stop()}}),r,null,[[0,14]])})))()}}},u=d,l=r("2877"),g=Object(l["a"])(u,a,o,!1,null,null,null);e["default"]=g.exports}}]);
//# sourceMappingURL=chunk-587c3640.74843e43.js.map