(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-080a923e"],{"3a15":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container py-5"},[a("h1",[e._v("新增商品")]),a("AdminProductForm",{attrs:{"is-processing":e.isProcessing},on:{"after-submit":e.handleAfterSubmit}})],1)},o=[],n=(a("96cf"),a("1da1")),i=a("401b"),s=a("be6c"),c=a("2fa3"),d={components:{AdminProductForm:i["a"]},data:function(){return{isProcessing:!1}},methods:{handleAfterSubmit:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,o,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.isProcessing=!0,a.next=4,s["a"].addNewProduct(e);case 4:if(r=a.sent,o=r.data,n=r.statusText,console.log(r),"OK"===n&&"success"===o.status){a.next=9;break}throw new Error(n);case 9:c["a"].fire({icon:"success",title:"新增商品成功"}),t.isProcessing=!1,t.$router.push("/admin/products"),a.next=19;break;case 14:a.prev=14,a.t0=a["catch"](0),console.log(a.t0),c["a"].fire({icon:"error",title:"無法新增商品"}),t.isProcessing=!1;case 19:case"end":return a.stop()}}),a,null,[[0,14]])})))()}}},l=d,u=a("2877"),g=Object(u["a"])(l,r,o,!1,null,null,null);t["default"]=g.exports},"401b":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isLoading?e._e():a("form",{on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit(t)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"name"}},[e._v("產品名稱(必填)")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.product.name,expression:"product.name"}],staticClass:"form-control",attrs:{type:"text",id:"name",name:"name",required:""},domProps:{value:e.product.name},on:{input:function(t){t.target.composing||e.$set(e.product,"name",t.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"brandId"}},[e._v("品牌類別")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.product.BrandId,expression:"product.BrandId"}],staticClass:"form-control",attrs:{id:"brandId",name:"brandId"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.product,"BrandId",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"",selected:"",disabled:""}},[e._v("--請選擇--")]),e._l(e.brands,(function(t){return a("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])}))],2)]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"listPrice"}},[e._v("市價")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.product.listPrice,expression:"product.listPrice"}],staticClass:"form-control",attrs:{type:"text",id:"listPrice",name:"listPrice"},domProps:{value:e.product.listPrice},on:{input:function(t){t.target.composing||e.$set(e.product,"listPrice",t.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"sellingPrice"}},[e._v("售價")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.product.sellingPrice,expression:"product.sellingPrice"}],staticClass:"form-control",attrs:{type:"text",id:"sellingPrice",name:"sellingPrice"},domProps:{value:e.product.sellingPrice},on:{input:function(t){t.target.composing||e.$set(e.product,"sellingPrice",t.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"inventory"}},[e._v("庫存")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.product.inventory,expression:"product.inventory"}],staticClass:"form-control",attrs:{type:"text",id:"inventory",name:"inventory"},domProps:{value:e.product.inventory},on:{input:function(t){t.target.composing||e.$set(e.product,"inventory",t.target.value)}}})]),a("div",{staticClass:"form-group"},[e._v(" 是否上架(必填) "),a("div",{staticClass:"form-check"},[a("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"sellingStatus",id:"sellingStatusTrue",value:"1",required:""},domProps:{checked:!0===e.product.sellingStatus}}),a("label",{staticClass:"form-check-label",attrs:{for:"sellingStatusTrue"}},[e._v("是")])]),a("div",{staticClass:"form-check"},[a("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"sellingStatus",id:"sellingStatusFalse",value:"0"},domProps:{checked:!1===e.product.sellingStatus}}),a("label",{staticClass:"form-check-label",attrs:{for:"sellingStatusFalse"}},[e._v("否")])])]),a("div",{staticClass:"form-group"},[e._v(" 是否免運(必填) "),a("div",{staticClass:"form-check"},[a("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"shippingFee",id:"shippingFeeTrue",value:"1",required:""},domProps:{checked:!0===e.product.shippingFee}}),a("label",{staticClass:"form-check-label",attrs:{for:"shippingFeeTrue"}},[e._v("是")])]),a("div",{staticClass:"form-check"},[a("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"shippingFee",id:"shippingFeeFalse",value:"0"},domProps:{checked:!1===e.product.shippingFee}}),a("label",{staticClass:"form-check-label",attrs:{for:"shippingFeeFalse"}},[e._v("否")])])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"image1"}},[e._v("Image1")]),e.product.image1?a("img",{staticClass:"d-block img-thumbnail mb-3",attrs:{src:e.product.image1,width:"200",height:"200"}}):e._e(),a("input",{staticClass:"form-control-file",attrs:{id:"image1",type:"file",name:"image1",accept:"image/*"},on:{change:e.handleFileChange}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"image2"}},[e._v("Image2")]),e.product.image2?a("img",{staticClass:"d-block img-thumbnail mb-3",attrs:{src:e.product.image2,width:"200",height:"200"}}):e._e(),a("input",{staticClass:"form-control-file",attrs:{id:"image2",type:"file",name:"image2",accept:"image/*"},on:{change:e.handleFileChange}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"image3"}},[e._v("Image3")]),e.product.image3?a("img",{staticClass:"d-block img-thumbnail mb-3",attrs:{src:e.product.image3,width:"200",height:"200"}}):e._e(),a("input",{staticClass:"form-control-file",attrs:{id:"image3",type:"file",name:"image3",accept:"image/*"},on:{change:e.handleFileChange}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"image4"}},[e._v("Image4")]),e.product.image4?a("img",{staticClass:"d-block img-thumbnail mb-3",attrs:{src:e.product.image4,width:"200",height:"200"}}):e._e(),a("input",{staticClass:"form-control-file",attrs:{id:"image4",type:"file",name:"image4",accept:"image/*"},on:{change:e.handleFileChange}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"detail"}},[e._v("商品描述")]),e.product.detail?a("img",{staticClass:"d-block img-thumbnail mb-3",attrs:{src:e.product.detail,width:"200",height:"200"}}):e._e(),a("input",{staticClass:"form-control-file",attrs:{id:"detail",type:"file",name:"detail",accept:"image/*"},on:{change:e.handleFileChange}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"deliveryKnow"}},[e._v("運送須知")]),e.product.deliveryKnow?a("img",{staticClass:"d-block img-thumbnail mb-3",attrs:{src:e.product.deliveryKnow,width:"200",height:"200"}}):e._e(),a("input",{staticClass:"form-control-file",attrs:{id:"deliveryKnow",type:"file",name:"deliveryKnow",accept:"image/*"},on:{change:e.handleFileChange}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"refundKnow"}},[e._v("退貨須知")]),e.product.refundKnow?a("img",{staticClass:"d-block img-thumbnail mb-3",attrs:{src:e.product.refundKnow,width:"200",height:"200"}}):e._e(),a("input",{staticClass:"form-control-file",attrs:{id:"refundKnow",type:"file",name:"refundKnow",accept:"image/*"},on:{change:e.handleFileChange}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"category1Id"}},[e._v("產品大類")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.product.Category1Id,expression:"product.Category1Id"}],staticClass:"form-control",attrs:{id:"category1Id",name:"category1Id"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.product,"Category1Id",t.target.multiple?a:a[0])},function(t){return e.getCategories(t)}]}},[a("option",{attrs:{value:"",disabled:""}},[e._v("--請選擇--")]),e._l(e.category1s,(function(t){return a("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])}))],2)]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"category2Id"}},[e._v("產品中類")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.product.Category2Id,expression:"product.Category2Id"}],staticClass:"form-control",attrs:{id:"category2Id",name:"category2Id"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.product,"Category2Id",t.target.multiple?a:a[0])},function(t){return e.getCategories(t)}]}},[a("option",{attrs:{value:"",selected:"",disabled:""}},[e._v("--請選擇--")]),e._l(e.category2s,(function(t){return a("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])}))],2)]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"category3Id"}},[e._v("產品小類")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.product.Category3Id,expression:"product.Category3Id"}],staticClass:"form-control",attrs:{id:"category3Id",name:"category3Id"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.product,"Category3Id",t.target.multiple?a:a[0])},function(t){return e.getCategories(t)}]}},[a("option",{attrs:{value:"",selected:"",disabled:""}},[e._v("--請選擇--")]),e._l(e.category3s,(function(t){return a("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])}))],2)]),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:e.isProcessing}},[e._v(e._s(e.isProcessing?"處理中...":"送出"))])])},o=[],n=(a("b0c0"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("96cf"),a("1da1")),i=a("5530"),s=a("2fa3"),c=a("be6c"),d={props:{productFromDb:{type:Object},isProcessing:{type:Boolean}},watch:{productFromDb:function(e){this.product=Object(i["a"])({},e),this.getCategories("getCategory2s"),this.getCategories("getCategory3s")}},data:function(){return{product:{name:null,BrandId:"",listPrice:0,sellingPrice:0,inventory:0,sellingStatus:null,shippingFee:null,image1:"",image2:"",image3:"",image4:"",detail:"",deliveryKnow:"",refundKnow:"",Category1Id:"",Category2Id:"",Category3Id:""},brands:[],category1s:[],category2s:[],category3s:[],isLoading:!0}},created:function(){this.getAllBrandsAndCategories(),this.getCategories("getCategory1s")},methods:{handleFileChange:function(e){var t=e.target.name,a=e.target.files,r=window.URL.createObjectURL(a[0]);"image1"===t?this.product.image1=r:"image2"===t?this.product.image2=r:"image3"===t?this.product.image3=r:"image4"===t?this.product.image4=r:"detail"===t?this.product.detail=r:"deliveryKnow"===t?this.product.deliveryKnow=r:this.product.refundKnow=r},getAllBrandsAndCategories:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c["a"].getAllBrandsAndCategories();case 3:if(a=t.sent,r=a.data,o=a.statusText,"OK"===o){t.next=7;break}throw new Error(o);case 7:e.brands=r.brands,e.isLoading=!1,t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](0),console.log(t.t0),s["a"].fire({icon:"error",title:"無法獲取品牌及分類資料"});case 15:case"end":return t.stop()}}),t,null,[[0,11]])})))()},handleSubmit:function(e){var t=e.target,a=new FormData(t);this.$emit("after-submit",a)},getCategories:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,o,n,i,d,l,u,g,m,p,f,v,h;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,r={},"getCategory1s"!==e){a.next=13;break}return r[e]="",a.next=6,c["a"].getCategories(r);case 6:if(o=a.sent,n=o.data,i=o.statusText,"OK"===i){a.next=10;break}throw new Error(i);case 10:t.category1s=n.category1s,a.next=43;break;case 13:if("getCategory2s"!==e){a.next=24;break}return r["category1Id"]=t.product.Category1Id,a.next=17,c["a"].getCategories(r);case 17:if(d=a.sent,l=d.data,u=d.statusText,"OK"===u){a.next=21;break}throw new Error(u);case 21:t.category2s=l.category2s,a.next=43;break;case 24:if("getCategory3s"!==e){a.next=35;break}return r["category2Id"]=t.product.Category2Id,a.next=28,c["a"].getCategories(r);case 28:if(g=a.sent,m=g.data,p=g.statusText,"OK"===p){a.next=32;break}throw new Error(p);case 32:t.category3s=m.category3s,a.next=43;break;case 35:return r[e.target.name]=e.target.value,a.next=38,c["a"].getCategories(r);case 38:if(f=a.sent,v=f.data,h=f.statusText,"OK"===h){a.next=42;break}throw new Error(h);case 42:"category1Id"===e.target.name?(t.product.Category2Id="",t.product.Category3Id="",t.category2s=v.category2s):"category2Id"===e.target.name&&(t.product.Category3Id="",t.category3s=v.category3s);case 43:a.next=49;break;case 45:a.prev=45,a.t0=a["catch"](0),console.log(a.t0),s["a"].fire({icon:"error",title:"無法獲取分類資料"});case 49:case"end":return a.stop()}}),a,null,[[0,45]])})))()}}},l=d,u=a("2877"),g=Object(u["a"])(l,r,o,!1,null,null,null);t["a"]=g.exports},be6c:function(e,t,a){"use strict";a("d3b7"),a("25f0"),a("3ca3"),a("ddb0"),a("2b3d");var r=a("2fa3"),o=function(){return localStorage.getItem("token")};t["a"]={getAllProducts:function(){return r["b"].get("/admin/products",{headers:{Authorization:"Bearer ".concat(o())}})},getAllBrandsAndCategories:function(){return r["b"].get("/admin/getAllBrandsAndCategories",{headers:{Authorization:"Bearer ".concat(o())}})},addNewProduct:function(e){return r["b"].post("/admin/products",e,{headers:{Authorization:"Bearer ".concat(o())}})},getProduct:function(e){var t=e.productId;return r["b"].get("/admin/products/".concat(t),{headers:{Authorization:"Bearer ".concat(o())}})},updateProduct:function(e){var t=e.formData,a=e.productId;return r["b"].post("/admin/products/".concat(a),t,{headers:{Authorization:"Bearer ".concat(o())}})},getCategories:function(e){var t=new URLSearchParams(e);return r["b"].get("/admin/categories?".concat(t.toString()),{headers:{Authorization:"Bearer ".concat(o())}})},addCategory:function(e){var t=e.formData,a=e.query,n=new URLSearchParams(a);return r["b"].post("/admin/categories?".concat(n.toString()),t,{headers:{Authorization:"Bearer ".concat(o())}})},updateCategory:function(e){var t=e.formData,a=e.query,n=new URLSearchParams(a);return r["b"].put("/admin/categories?".concat(n.toString()),t,{headers:{Authorization:"Bearer ".concat(o())}})},deleteCategory:function(e){var t=e.whichCategory,a=e.categoryId;return r["b"].delete("/admin/categories",{params:{whichCategory:t,categoryId:a},headers:{Authorization:"Bearer ".concat(o())}})},getAllMembers:function(){return r["b"].get("/admin/members",{headers:{Authorization:"Bearer ".concat(o())}})},getAllOrders:function(){return r["b"].get("/admin/orders",{headers:{Authorization:"Bearer ".concat(o())}})},updateOrderShipped:function(e){return r["b"].put("/admin/orders/".concat(e),{},{headers:{Authorization:"Bearer ".concat(o())}})},getAllBrands:function(){return r["b"].get("/admin/brands",{headers:{Authorization:"Bearer ".concat(o())}})},addBrand:function(e){var t=e.brandName;return r["b"].post("/admin/brands",{brandName:t},{headers:{Authorization:"Bearer ".concat(o())}})},updateBrand:function(e){var t=e.brandName,a=e.brandId;return r["b"].put("/admin/brands",{brandName:t,brandId:a},{headers:{Authorization:"Bearer ".concat(o())}})},deleteBrand:function(e){var t=e.brandId;return r["b"].delete("/admin/brands",{params:{brandId:t},headers:{Authorization:"Bearer ".concat(o())}})}}}}]);
//# sourceMappingURL=chunk-080a923e.e30d8b19.js.map